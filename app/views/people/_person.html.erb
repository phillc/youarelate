


<li id="person_<%= person.id %>" class="person">
  <div class="utils">
    <%= link_to image_tag("icons/report-paper.png", :alt => "Edit person"), edit_person_path(@user, person) %>
    <%= link_to_function image_tag("icons/cross.png", :alt => "Delete this person"), "$(this).up('li.person').down('.confirm_delete').toggle(); return false;" %>
    <%= link_to_function image_tag("icons/plus.png", :alt => "Add person to calculations"), "move_person($(this).up('li.person'), $('calculations')); return false;" %>
  </div>
  <div class="calc-utils">
    <%= link_to_function image_tag("icons/minus.png", :alt => "Remove person from calculations"), "move_person($(this).up('li.person'), $('people')); return false;" %>
  </div>
  <%= person.name %>
  <%= draggable_element("person_" + person.id.to_s, :revert => true) %>
  <% javascript_tag do %>
    $('person_<%= person.id %>').observe('mouseover', respond_to_hover);
  <% end %>
  <div class="person_stat">
    <div id="graph_box" style="width:266px; height:100px; margin: 12px auto 0; background-color: white; border: 1px solid #938A82;">
      <script type="text/javascript">
        Event.observe(window, 'load', function() {
          //Flotr.draw( $('graph_box'), [1,2] );
          var f = Flotr.draw(
          $('graph_box'), [
            { // => first series
              data: [ [0, 0], [1, 2], [2, 4], [3, 6], [4, 8] ],
              label: "y = 2x",
              lines: {show: true, fill: true},
              points: {show: true}
            },
            { // => second series
              data: [ [0, 2.5], [1, 5.5], [2, 8.5], [3, 11.5], [4, 14.5] ],
              label: "y = 2.5 + 3x"
            }],
          {
            selection: {
              mode: 'x', 		// => null, 'x', 'y' or 'xy'
              color: '#B6D9FF', 	// => color of the selection box
              fps: 10 		// => frames-per-second to draw the selection box.
            },
            mouse: {
              track: true,		// => true to track mouse
              position: 'se',		// => position to show the track value box
              //trackFormatter: defaultTrackFormatter,	// => fn: int -> string
              margin: 3,		// => margin for the track value box
              color: '#ff3f19',	// => color for the tracking points, null to hide points
              trackDecimals: 1,	// => number of decimals for track values
              radius: 3,		// => radius of the tracking points
              sensibility: 2		// => the smaller this value, the more precise you've to point with the mouse
            }
          }
        );

        });
      </script>
    </div>
    <p><%= person.notes %></p>
  </div>
  <%= hidden_field :people, "", {:id => "", :value => person.id} %>
  <div class="confirm_delete" style="display:none;">
    <p>
      Are you sure?
      <%= link_to_function "no", "$(this).up('li.person').down('.confirm_delete').toggle(); return false;" %>
      <%= link_to_remote "delete", :url => person_path(@user, person, :js), :method => :delete, :success => "$('person_" + person.id.to_s + "').remove()" %>
    </p>
  </div>
</li>
